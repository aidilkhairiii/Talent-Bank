<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Startup Network — Set Up Profile</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-50 text-slate-900">
  <header class="bg-white/90 backdrop-blur shadow-sm">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
      <div class="flex items-center justify-between">
        <div class="flex items-center gap-3">
          <div class="h-9 w-9 rounded-lg bg-gradient-to-br from-fuchsia-500 via-indigo-500 to-blue-500 grid place-items-center text-white font-bold">U</div>
          <div>
            <div class="font-extrabold leading-tight">University of Startup</div>
            <div class="text-xs text-slate-500">Startup Network</div>
          </div>
        </div>
        <a href="my-profile.html" class="rounded-xl border border-slate-200 px-3 py-2 text-sm hover:border-rose-300 hover:text-rose-600">My Profile</a>
      </div>

      <div class="mt-4 flex gap-6 border-b border-slate-200">
        <a href="network.html" class="px-3 py-2 text-sm font-medium text-slate-600 hover:text-indigo-600">Find a Startup</a>
        <a href="profile-setup.html" class="px-3 py-2 text-sm font-medium border-b-2 border-indigo-600 text-indigo-600">Set Up Profile</a>
        <a href="my-profile.html" class="px-3 py-2 text-sm font-medium text-slate-600 hover:text-indigo-600">My Profile</a>
      </div>
    </div>
  </header>

  <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 grid lg:grid-cols-3 gap-8">

    <!-- Live Preview -->
    <aside class="lg:col-span-1 space-y-6">
      <div class="rounded-2xl overflow-hidden bg-white ring-1 ring-slate-100 shadow-sm">
        <div id="prevCover" class="h-28 bg-gradient-to-r from-indigo-600 to-blue-600"></div>
        <div class="p-5">
          <div class="-mt-12 mb-2">
            <img id="prevAvatar" class="h-24 w-24 rounded-2xl ring-4 ring-white object-cover bg-slate-200" />
          </div>
          <h1 id="prevName" class="text-xl font-bold">Your Name</h1>
          <p id="prevHeadline" class="text-sm text-slate-600 mt-1">Your headline</p>
          <div id="prevBadges" class="mt-3 flex flex-wrap gap-2 text-xs"></div>

          <div class="mt-4">
            <h3 class="text-sm font-semibold">About</h3>
            <p id="prevAbout" class="mt-1 text-sm text-slate-700">Tell people what you’re building and why.</p>
          </div>

          <div class="mt-4">
            <h3 class="text-sm font-semibold">Skills</h3>
            <div id="prevSkills" class="mt-2 flex flex-wrap gap-2 text-xs"></div>
          </div>
        </div>
      </div>
      <div class="rounded-2xl bg-white ring-1 ring-slate-100 shadow-sm p-4 text-sm text-slate-600">
        Tip: Keep your headline short (role + domain). Add 6–10 focused skills.
      </div>
    </aside>

    <!-- Form -->
    <section class="lg:col-span-2 space-y-6">
      <form id="form" class="space-y-6">

        <!-- Images -->
        <div class="rounded-2xl bg-white ring-1 ring-slate-100 shadow-sm p-6">
          <h2 class="text-lg font-semibold">Profile Images</h2>
          <div class="mt-4 grid sm:grid-cols-2 gap-6">
            <div>
              <label class="text-sm text-slate-600">Cover Image</label>
              <input id="coverInput" type="file" accept="image/*" class="mt-1 block w-full text-sm text-slate-600 file:mr-4 file:rounded-lg file:border-0 file:bg-indigo-50 file:px-4 file:py-2.5 file:text-indigo-700 hover:file:bg-indigo-100"/>
              <p class="text-xs text-slate-500 mt-1">Recommended: 1200×300</p>
            </div>
            <div>
              <label class="text-sm text-slate-600">Profile Photo</label>
              <input id="avatarInput" type="file" accept="image/*" class="mt-1 block w-full text-sm text-slate-600 file:mr-4 file:rounded-lg file:border-0 file:bg-indigo-50 file:px-4 file:py-2.5 file:text-indigo-700 hover:file:bg-indigo-100"/>
              <p class="text-xs text-slate-500 mt-1">Square image works best</p>
            </div>
          </div>
        </div>

        <!-- Basics -->
        <div class="rounded-2xl bg-white ring-1 ring-slate-100 shadow-sm p-6">
          <h2 class="text-lg font-semibold">Basics</h2>
          <div class="mt-4 grid sm:grid-cols-2 gap-4">
            <div>
              <label class="text-sm text-slate-600">Full Name</label>
              <input id="name" class="mt-1 w-full rounded-xl border border-slate-200 bg-slate-50 px-4 py-2.5 text-sm outline-none focus:ring-2 focus:ring-indigo-600" />
            </div>
            <div>
              <label class="text-sm text-slate-600">Headline</label>
              <input id="headline" maxlength="80" class="mt-1 w-full rounded-xl border border-slate-200 bg-slate-50 px-4 py-2.5 text-sm outline-none focus:ring-2 focus:ring-indigo-600" placeholder="e.g., AI Engineer · Co-founder" />
            </div>
          </div>
          <div class="mt-4">
            <label class="text-sm text-slate-600">About</label>
            <textarea id="about" rows="4" class="mt-1 w-full rounded-xl border border-slate-200 bg-slate-50 px-4 py-2.5 text-sm outline-none focus:ring-2 focus:ring-indigo-600"></textarea>
          </div>
          <div class="mt-4 grid sm:grid-cols-2 gap-4">
            <div>
              <label class="text-sm text-slate-600">Availability</label>
              <select id="availability" class="mt-1 w-full rounded-xl border border-slate-200 bg-white px-4 py-2.5 text-sm">
                <option>Open to roles</option>
                <option>Open to projects</option>
                <option>Not looking</option>
              </select>
            </div>
            <div>
              <label class="text-sm text-slate-600">Location</label>
              <input id="location" class="mt-1 w-full rounded-xl border border-slate-200 bg-slate-50 px-4 py-2.5 text-sm" placeholder="City, Country" />
            </div>
          </div>
        </div>

        <!-- Skills -->
        <div class="rounded-2xl bg-white ring-1 ring-slate-100 shadow-sm p-6">
          <h2 class="text-lg font-semibold">Skills</h2>
          <div id="skillsWrap" class="mt-2 flex flex-wrap gap-2"></div>
          <div class="mt-3 flex gap-2">
            <input id="skillInput" placeholder="Add a skill (Enter)" class="flex-1 rounded-xl border border-slate-200 bg-slate-50 px-4 py-2.5 text-sm outline-none focus:ring-2 focus:ring-indigo-600"/>
            <button type="button" id="addSkill" class="rounded-xl border border-slate-200 px-4 py-2.5 text-sm hover:border-rose-300 hover:text-rose-600">Add</button>
          </div>
        </div>

        <!-- Experience (simple list) -->
        <div class="rounded-2xl bg-white ring-1 ring-slate-100 shadow-sm p-6">
          <div class="flex items-center justify-between">
            <h2 class="text-lg font-semibold">Experience</h2>
            <button type="button" id="addExp" class="rounded-xl bg-indigo-600 px-3 py-2 text-sm text-white hover:bg-indigo-700">Add Role</button>
          </div>
          <div id="expList" class="mt-4 space-y-4"></div>
        </div>

        <!-- Education + Links -->
        <div class="rounded-2xl bg-white ring-1 ring-slate-100 shadow-sm p-6">
          <h2 class="text-lg font-semibold">Education & Links</h2>
          <div class="mt-4 grid sm:grid-cols-2 gap-3">
            <input id="eduTitle" class="rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-sm" placeholder="Degree (e.g., B.Comp.Sc AI)"/>
            <input id="eduSchool" class="rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-sm" placeholder="University of Startup"/>
          </div>
          <div id="linksList" class="mt-4 space-y-3">
            <div class="grid sm:grid-cols-2 gap-3">
              <input class="link-label rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-sm" placeholder="GitHub"/>
              <input class="link-url rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-sm" placeholder="https://github.com/username"/>
            </div>
          </div>
          <button type="button" id="addLink" class="mt-3 rounded-xl border border-slate-200 px-4 py-2.5 text-sm hover:border-rose-300 hover:text-rose-600">Add Link</button>
        </div>

        <div class="flex items-center justify-end gap-3">
          <a href="my-profile.html" class="rounded-xl border border-slate-200 px-4 py-2.5 text-sm hover:border-rose-300 hover:text-rose-600">Cancel</a>
          <button type="submit" class="rounded-xl bg-indigo-600 px-5 py-2.5 text-white text-sm font-semibold hover:bg-indigo-700">Save Profile</button>
        </div>
      </form>
    </section>
  </main>

  <script>
    // Helpers
    const $ = (id)=>document.getElementById(id);
    const data = JSON.parse(localStorage.getItem('uosProfile') || 'null') || {
      name:'Aidil Khairi',
      headline:'AI Engineer · Founder in Residence',
      about:'I build practical AI products.',
      availability:'Open to roles',
      location:'Kuala Lumpur, MY',
      skills:['Python','Next.js','LLMs'],
      experience:[
        {company:'GardenAI', role:'AI Engineer (Founding)', period:'2025 – Present', location:'Kuala Lumpur'}
      ],
      education:{title:'B.Comp.Sc (Artificial Intelligence)', school:'University of Startup'},
      links:[{label:'GitHub', url:'https://github.com/aidilkhairi'}],
      avatar:'', cover:''
    };

    // Bind form fields
    $('name').value = data.name;
    $('headline').value = data.headline;
    $('about').value = data.about;
    $('availability').value = data.availability;
    $('location').value = data.location;
    $('eduTitle').value = data.education.title;
    $('eduSchool').value = data.education.school;

    // Experience
    const expList = $('expList');
    function addExpRow(e={company:'',role:'',period:'',location:''}){
      const row=document.createElement('div');
      row.className='rounded-xl border border-slate-200 p-4';
      row.innerHTML = `
        <div class="grid sm:grid-cols-2 gap-3">
          <input class="exp-company rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-sm" placeholder="Company / Startup" value="${e.company||''}"/>
          <input class="exp-role rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-sm" placeholder="Role" value="${e.role||''}"/>
          <input class="exp-period rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-sm" placeholder="Period" value="${e.period||''}"/>
          <input class="exp-location rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-sm" placeholder="Location" value="${e.location||''}"/>
        </div>
        <div class="mt-3 text-right">
          <button type="button" class="removeExp text-sm text-rose-600 hover:underline">Remove</button>
        </div>`;
      row.querySelector('.removeExp').onclick = ()=>row.remove();
      expList.appendChild(row);
    }
    (data.experience||[]).forEach(addExpRow);
    $('addExp').onclick = ()=>addExpRow();

    // Skills
    const skillsWrap=$('skillsWrap'), skillInput=$('skillInput');
    function renderSkill(text){
      const span=document.createElement('span');
      span.className='inline-flex items-center gap-2 rounded-full bg-slate-100 px-2.5 py-1 text-sm';
      span.innerHTML=`<span>${text}</span><button type="button" class="text-slate-400 hover:text-rose-600">✕</button>`;
      span.querySelector('button').onclick=()=>span.remove();
      skillsWrap.appendChild(span);
    }
    (data.skills||[]).forEach(renderSkill);
    $('addSkill').onclick=()=>{ if(skillInput.value.trim()){ renderSkill(skillInput.value.trim()); skillInput.value=''; } };
    skillInput.addEventListener('keydown', e=>{ if(e.key==='Enter'){ e.preventDefault(); $('addSkill').click(); } });

    // Links
    const linksList=$('linksList');
    function addLinkRow(l={label:'',url:''}){
      const row=document.createElement('div');
      row.className='grid sm:grid-cols-2 gap-3';
      row.innerHTML=`<input class="link-label rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-sm" placeholder="Label" value="${l.label||''}"/>
                     <input class="link-url rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-sm" placeholder="https://..." value="${l.url||''}"/>`;
      linksList.appendChild(row);
    }
    (data.links||[]).forEach(addLinkRow);
    $('addLink').onclick=()=>addLinkRow();

    // Images + preview
    const prevName=$('prevName'), prevHeadline=$('prevHeadline'), prevAbout=$('prevAbout'), prevBadges=$('prevBadges'), prevSkills=$('prevSkills'), prevAvatar=$('prevAvatar'), prevCover=$('prevCover');
    function refreshPreview(){
      prevName.textContent = $('name').value || 'Your Name';
      prevHeadline.textContent = $('headline').value || 'Your headline';
      prevAbout.textContent = $('about').value || 'Tell people what you’re building and why.';
      prevBadges.innerHTML='';
      [ $('availability').value, $('location').value ].forEach(t=>{
        const chip=document.createElement('span');
        chip.className='rounded-full bg-slate-100 px-2.5 py-1';
        chip.textContent=t; prevBadges.appendChild(chip);
      });
      prevSkills.innerHTML='';
      skillsWrap.querySelectorAll('span > span:first-child').forEach(s=>{
        const chip=document.createElement('span');
        chip.className='rounded-full bg-slate-100 px-2.5 py-1';
        chip.textContent=s.textContent; prevSkills.appendChild(chip);
      });
    }
    ['name','headline','about','availability','location'].forEach(id=>$(id).addEventListener('input', refreshPreview));
    refreshPreview();

    // Load existing avatar/cover or default
    function setDefaultAvatar(){
      prevAvatar.src = `https://api.dicebear.com/7.x/initials/svg?seed=${encodeURIComponent($('name').value || 'U')}&backgroundType=gradientLinear`;
    }
    if(data.avatar){ prevAvatar.src=data.avatar; } else { setDefaultAvatar(); }
    if(data.cover){ 
      prevCover.style.backgroundImage=`url(${data.cover})`; prevCover.style.backgroundSize='cover'; prevCover.style.backgroundPosition='center';
    }

    function previewImage(input, target, isBg=false, storeKey){
      input.addEventListener('change', e=>{
        const f=e.target.files[0]; if(!f) return;
        const url=URL.createObjectURL(f);
        if(isBg){ target.style.backgroundImage=`url(${url})`; target.style.backgroundSize='cover'; target.style.backgroundPosition='center'; data[storeKey]=url; }
        else { target.src=url; data[storeKey]=url; }
      });
    }
    previewImage($('avatarInput'), prevAvatar, false, 'avatar');
    previewImage($('coverInput'), prevCover, true, 'cover');

    // Submit/save to localStorage
    $('form').addEventListener('submit', (e)=>{
      e.preventDefault();
      const profile = {
        name: $('name').value,
        headline: $('headline').value,
        about: $('about').value,
        availability: $('availability').value,
        location: $('location').value,
        skills: Array.from(skillsWrap.querySelectorAll('span > span:first-child')).map(n=>n.textContent),
        experience: Array.from(expList.querySelectorAll('.rounded-xl.border')).map(card=>({
          company: card.querySelector('.exp-company').value,
          role: card.querySelector('.exp-role').value,
          period: card.querySelector('.exp-period').value,
          location: card.querySelector('.exp-location').value
        })),
        education: { title: $('eduTitle').value, school: $('eduSchool').value },
        links: Array.from(linksList.querySelectorAll('.grid')).map(r=>({
          label: r.querySelector('.link-label').value, url: r.querySelector('.link-url').value
        })),
        avatar: data.avatar || '',
        cover: data.cover || ''
      };
      localStorage.setItem('uosProfile', JSON.stringify(profile));
      window.location.href = 'my-profile.html';
    });
  </script>
</body>
</html>
